/*! glance - v0.0.1 - 2013-07-24
* Copyright (c) 2013 Matthew Teece; Licensed MIT */
var Glance=function(){function t(){if(this.storage="store",this.data={entries:[]},window.localStorage&&window.JSON){var t=localStorage.getItem(this.storage);t?this.data=n(t):a.setItem(this.storage,e(this.data))}}function e(t){return JSON.stringify(t)}function n(t){return JSON.parse(t)}var i,a=window.localStorage;return i=window.localStorage&&window.JSON&&window._?{_fetch:function(t){var e=_.indexOf(this.data.entries,t);return e},_fetchById:function(t){return _.findWhere(this.data.entries,{id:t})},save:function(t){if(t.id){var n=this._fetch(t);return n>=0?(this.data.entries[n]=t,localStorage.setItem(this.storage,e(this.data)),t):!1}return t.id=UUID.generate(),this.data.entries.push(t),localStorage.setItem(this.storage,e(this.data)),t},remove:function(t){var n=_.without(this.data.entries,_.findWhere(this.data.entries,t));n.length>0&&(this.data.entries=n,localStorage.setItem(this.storage,e(this.data)))},select:function(t){return _.findWhere(this.data.entries,t)},selectAll:function(){return this.data.entries},count:function(){return this.data.entries.length},flush:function(){this.data={entries:[]},localStorage.setItem(this.storage,e(this.data))}}:{save:function(){},remove:function(){},select:function(){},selectAll:function(){},count:function(){},flush:function(){}},_.extend(t.prototype,i),t}();